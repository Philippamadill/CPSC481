<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventEASE - Purchase Tickets</title>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Arvo&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
			<img src="images/gps-marker-icon.jpg" alt="GPS Marker" id="gps-icon">
            <div class="logo">EventEASE</div>
			<div class="page-title" style="margin-bottom: 30px;">Checkout</div>
        </div>
		<div class="payment-container">
            <form action="/submit-payment" method="post"> 
                <label for="name">Name on Card:</label>
                <input type="text" id="name" name="card_name" required>

                <label for="card-number">Card Number:</label>
                <input type="text" id="card-number" name="card_number" required>

                <div class="expiry-cvv">
                    <div>
                        <label for="expiry">Expiry Date:</label>
                        <input type="text" id="expiry" name="expiry_date" placeholder="MM/YY" required>
                    </div>
                    <div>
                        <label for="cvv">CVV:</label>
                        <input type="text" id="cvv" name="cvv" required>
                    </div>
                </div>

                <label for="address">Billing Address:</label>
                <textarea id="address" name="billing_address" required></textarea>
				
				<div id="receipt-details">
					<h2>Your Order</h2>
					<ul id="ticket-summary">
						<!-- Ticket summary will be populated here -->
					</ul>
					<div class="total-amnt" id="total-amount">Total = $0.00</div>
					<div class="total-amnt" id="total-amount">Total = $0.00</div>
					<div class="total-amnt" id="total-amount">Total = $0.00</div>
				</div>

                <button type="submit" class="pay-btn">Make Payment</button>
            </form>
        </div>
		
		
		
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				// Function to format ticket names
				function formatTicketName(ticket) {
					return ticket.charAt(0).toUpperCase() + ticket.slice(1).replace(/-/g, ' ');
				}

				// Retrieve and display the ticket quantities and prices
				var tickets = JSON.parse(localStorage.getItem('tickets') || '{}');
				var ticketSummary = document.getElementById('ticket-summary');
				Object.keys(tickets).forEach(function(ticket) {
					var quantity = tickets[ticket];
					if (quantity > 0) {
						var listItem = document.createElement('li');
						listItem.textContent = formatTicketName(ticket) + ': ' + quantity;
						ticketSummary.appendChild(listItem);
					}
				});

				// Retrieve and display the total amount
				var totalAmount = localStorage.getItem('totalAmount');
				document.getElementById('total-amount').textContent = 'Total = ' + (totalAmount || '$0.00');
			});
		</script>
		
		<!-- <script>
			document.querySelector('.pay-btn').addEventListener('click', function() {
				// Here you can also add validation or confirmation prompts if needed

				// Clear localStorage after successful payment
				localStorage.removeItem('tickets');
				localStorage.removeItem('selectedDay');
				localStorage.removeItem('totalAmount');
			});
		</script> -->

		<script>
			document.querySelector('.pay-btn').addEventListener('click', function(event) {
				event.preventDefault(); // Prevents form submission

				// Displaying the purchase successful message
				alert('Purchase Successful!');

				// Clear localStorage after successful payment
				localStorage.removeItem('tickets');
				localStorage.removeItem('selectedDay');
				localStorage.removeItem('totalAmount');

				// Redirecting to the home page
				window.location.href = 'index.html'; // Replace 'index.html' with your home page URL
			});
		</script>

		
		<div class="navbar">
			<div class="nav-item">⌂</div>
			<div class="nav-item">?</div>
		</div>
		<div class="arrow">
            ← 
        </div>
		<!-- ←→ -->
    </div>
</body>
</html>
